{% extends 'base.html' %}

{% block content %}
<div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
  <h1 class="text-2xl font-bold text-center text-blue-700 mb-2">Solicitud de Alta como Paciente</h1>
  <p class="text-center text-gray-500 mb-6">Clínica de Fisioterapia Vitatec</p>

  {% if mensaje %}
    <div class="text-center text-green-700 bg-green-100 border border-green-300 rounded-md p-4">
      <h2 class="text-xl font-semibold mb-2">✅ Solicitud recibida correctamente</h2>
      <p>Gracias por tu solicitud. Te contactaremos pronto.</p>
    </div>
  {% else %}
    <form method="POST" action="{{ url_for('solicitud_alta') }}">

      <!-- Nombre -->
      <label class="block mb-1 text-sm font-medium">Nombre</label>
      <input name="nombre" value="{{ datos.nombre }}" type="text" pattern="[A-Za-zÁÉÍÓÚÑáéíóúñ ]{2,}" class="w-full p-2 border rounded-md" required>
      {% if errores.nombre %}
        <p class="text-sm text-red-600 mt-1">{{ errores.nombre }}</p>
      {% endif %}

      <!-- Apellidos -->
      <label class="block mt-4 mb-1 text-sm font-medium">Apellidos</label>
      <input name="apellidos" value="{{ datos.apellidos }}" type="text" pattern="[A-Za-zÁÉÍÓÚÑáéíóúñ ]{2,}" class="w-full p-2 border rounded-md" required>
      {% if errores.apellidos %}
        <p class="text-sm text-red-600 mt-1">{{ errores.apellidos }}</p>
      {% endif %}

      <!-- DNI -->
      <label class="block mt-4 mb-1 text-sm font-medium">DNI/NIE/Pasaporte</label>
      <input name="dni" value="{{ datos.dni }}" type="text" pattern="[A-Za-z0-9]{6,10}" class="w-full p-2 border rounded-md" required>
      {% if errores.dni %}
        <p class="text-sm text-red-600 mt-1">{{ errores.dni }}</p>
      {% endif %}

      <!-- Teléfono -->
      <label class="block mt-4 mb-1 text-sm font-medium">Teléfono</label>
      <input name="movil" value="{{ datos.movil }}" type="tel" pattern="[0-9]{9}" maxlength="9" class="w-full p-2 border rounded-md" required>
      {% if errores.movil %}
        <p class="text-sm text-red-600 mt-1">{{ errores.movil }}</p>
      {% endif %}

      <!-- Email -->
      <label class="block mt-4 mb-1 text-sm font-medium">Email</label>
      <input name="email" value="{{ datos.email }}" type="email" class="w-full p-2 border rounded-md" required>
      {% if errores.email %}
        <p class="text-sm text-red-600 mt-1">{{ errores.email }}</p>
      {% endif %}

      <!-- Fecha de nacimiento -->
      <label class="block mt-4 mb-1 text-sm font-medium">Fecha de nacimiento</label>
      <input name="fecha_nacimiento" value="{{ datos.fecha_nacimiento }}" type="date" class="w-full p-2 border rounded-md">
      {% if errores.fecha_nacimiento %}
        <p class="text-sm text-red-600 mt-1">{{ errores.fecha_nacimiento }}</p>
      {% endif %}

      <!-- Motivo -->
      <label class="block mt-4 mb-1 text-sm font-medium">Motivo de consulta (opcional)</label>
      <textarea name="motivo" rows="3" class="w-full p-2 border rounded-md">{{ datos.motivo }}</textarea>

      <!-- Botón -->
      <button type="submit" class="w-full mt-6 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition">
        Solicitar alta
      </button>
    </form>
  {% endif %}
</div>
{% endblock %}
